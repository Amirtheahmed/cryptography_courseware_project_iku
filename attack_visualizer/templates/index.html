<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DH Vulnerability Simulator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

<div class="header">
    <h1>Diffie-Hellman Protocol <span class="highlight">Attack Lab</span></h1>
    <div class="controls">
        <button onclick="startHandshake('ephemeral')"><i class="fas fa-sync"></i> Ephemeral Handshake (Secure)</button>
        <button onclick="startHandshake('static')"><i class="fas fa-lock"></i> Static Handshake (Risky)</button>
        <button onclick="toggleAttack()" class="btn-red"><i class="fas fa-user-secret"></i> Toggle MitM Attack</button>
        <button onclick="leakKey()" class="btn-warning"><i class="fas fa-radiation"></i> Leak burak's Key</button>
    </div>
</div>

<div class="network-grid">
    <!-- arda -->
    <div class="node" id="node-arda">
        <div class="icon"><i class="fas fa-user-shield"></i></div>
        <h2>arda</h2>
        <div class="status-box">Status: <span id="status-arda">Idle</span></div>
        <div class="key-display" id="key-arda">Shared Secret: ???</div>
    </div>

    <!-- THE CHANNEL (MALLORY) -->
    <div class="channel-zone">
        <div class="wire"></div>
        <div class="packet" id="active-packet"><i class="fas fa-envelope"></i></div>

        <div class="node attacker" id="node-mallory">
            <div class="icon"><i class="fas fa-user-secret"></i></div>
            <h2>Mallory</h2>
            <div class="status-box" id="status-mallory">Mode: Passive</div>
            <div class="hack-console" id="hack-console">Waiting for traffic...</div>
        </div>
    </div>

    <!-- burak -->
    <div class="node" id="node-burak">
        <div class="icon"><i class="fas fa-server"></i></div>
        <h2>burak</h2>
        <div class="status-box">Status: <span id="status-burak">Idle</span></div>
        <div class="key-display" id="key-burak">Shared Secret: ???</div>
    </div>
</div>

<div class="log-panel">
    <h3><i class="fas fa-terminal"></i> Simulation Logs</h3>
    <div id="log-container"></div>
</div>

<script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>